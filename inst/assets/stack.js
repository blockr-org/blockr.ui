(()=>{"use strict";var t;Sortable,function(t){t[t.noStack=1]="noStack",t[t.noBlockIndex=2]="noBlockIndex",t[t.stackAlreadyHasDataBlock=3]="stackAlreadyHasDataBlock",t[t.stackAlreadyHasPlotBlock=4]="stackAlreadyHasPlotBlock"}(t||(t={}));const e=new Map;e.set(t.noStack,"must drag blocks within a stack"),e.set(t.noBlockIndex,"could not find block index"),e.set(t.stackAlreadyHasDataBlock,"this stack already includes a data block"),e.set(t.stackAlreadyHasPlotBlock,"this stack already includes a plot block");const a=new Map;var d,s;a.set(t.noStack,"no-stack"),a.set(t.noBlockIndex,"no-block-index"),a.set(t.stackAlreadyHasDataBlock,"stack-already-has-data-block"),a.set(t.stackAlreadyHasPlotBlock,"stack-already-has-plot-block"),(s=d||(d={}))[s.deferred=1]="deferred",s[s.throttled=2]="throttled",s[s.immediate=3]="immediate";const o=new Map;o.set(d.deferred,"deferred"),o.set(d.throttled,"throttle"),o.set(d.immediate,"event");const r=t=>{let e=t.id;t.ns&&(e=`${t.ns}-${e}`);const a=o.get(t.priority)||"deferred";Shiny.setInputValue(e,t.message,{priority:a})};$((()=>{$(document).find(".add-stack").each(((t,e)=>{if($(e).hasClass("sorted"))return;$(e).addClass("sorted");const a=(t=>{const e=null==t?void 0:t.split("-");return null==e?void 0:e.slice(0,e.length-1).join("-")})($(e).attr("id")),s=$(e).closest(".add-stack-wrapper").data("target");let o="";$(e).on("dragstart",(t=>{var e;o=$(t.target).text(),t.originalEvent.dataTransfer.setData("text/plain",null===(e=t.target)||void 0===e?void 0:e.id)})),$(e).on("dragover",(t=>{t.preventDefault()})),$(e).on("dragenter",(t=>{r({id:"started",ns:a,message:{type:o},priority:d.immediate}),t.preventDefault()})),$(s).on("dragover",(t=>{t.preventDefault()})),$(s).on("dragenter",(t=>{t.preventDefault()})),$(s).on("drop dragdrop",(t=>{var e;r({id:"dropped",ns:a,message:{type:o,target:null===(e=t.target)||void 0===e?void 0:e.id},priority:d.immediate})}))})),Shiny.addCustomMessageHandler("add-stack-init",(t=>{console.log(t)}))}))})();